datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model user {
  id         String   @id @default(uuid())
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt
  is_deleted Boolean  @default(false)
  email      String   @unique
  password   String
  role_id    String

  role role @relation(fields: [role_id], references: [id])

  @@index([created_at(sort: Desc)], name: "user_created_at_idx")
}

model role {
  id          String       @id @default(uuid())
  created_at  DateTime     @default(now())
  updated_at  DateTime     @updatedAt
  is_deleted  Boolean      @default(false)
  name        String       @unique
  users       user[]
  permissions permission[]

  @@index([created_at(sort: Desc)], name: "role_created_at_idx")
}

model permission {
  id         String   @id @default(uuid())
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt
  is_deleted Boolean  @default(false)
  resource   String
  operation  String
  role_id    String
  role       role     @relation(fields: [role_id], references: [id])

  @@index([created_at(sort: Desc)], name: "permission_created_at_idx")
}
